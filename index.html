<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src https://peleg123.app.n8n.cloud; font-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com; img-src 'self' https://i.ibb.co data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; script-src 'self' 'unsafe-inline'; form-action 'self'; base-uri 'none'; object-src 'none'; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="no-referrer">
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    <title>Octo Auto - טופס רישום לאוטומציות AI לעסק</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Heebo', Arial, sans-serif;
            line-height: 1.6;
            color: #37474F;
            max-width: 500px;
            margin: 0 auto;
            padding: 15px;
            background-color: #ECEFF1;
            text-align: right;
            touch-action: manipulation;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px;
                max-width: 100%;
            }
            
            .headline {
                padding: 12px;
                font-size: 1.2em;
            }
            
            .logo-image {
                width: 120px;
                height: 120px;
            }
            
            .company-name {
                font-size: 24px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            .form-container {
                padding: 15px;
            }
            
            input, select, textarea, button {
                font-size: 16px;
                padding: 12px;
            }
            
            .final-page .logo-image {
                width: 150px;
                height: 150px;
            }
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #6a399f;
        }
        .headline {
            text-align: center;
            margin-bottom: 25px;
            color: #6a399f;
            font-size: 1.4em;
            font-weight: bold;
            background-color: #e8e1f4;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #6a399f;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #d2c4e7;
            border-radius: 4px;
            font-size: 16px;
            background-color: white;
            text-align: right;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #6a399f;
            box-shadow: 0 0 0 3px rgba(106, 57, 159, 0.2);
        }
        button {
            background-color: #6a399f;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #5a2d8a;
        }
        .form-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Fix for iOS zooming on input fields */
        input, select, textarea {
            font-size: 16px;
        }
        .required {
            color: #6a399f;
        }
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .checkbox-container input[type="checkbox"] {
            width: auto;
            margin-left: 10px;
            margin-top: 5px;
        }
        .checkbox-label {
            font-size: 14px;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .small-text {
            font-size: 12px;
            color: #696969;
        }
        .progress-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .steps {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .step.active {
            background-color: #6a399f;
            color: white;
        }
        .step.inactive {
            background-color: #e8e1f4;
            color: #6a399f;
        }
        .step-connector {
            height: 2px;
            width: 30px;
            background-color: #e8e1f4;
        }
        .back-button {
            background-color: #37474F;
            margin-bottom: 20px;
            width: auto !important;
            font-size: 14px;
            padding: 8px 15px;
        }
        .final-page {
            text-align: center;
            padding: 40px 20px;
        }
        .final-page h2 {
            color: #6a399f;
            margin-bottom: 20px;
        }
        .final-page p {
            font-size: 18px;
            margin-bottom: 30px;
        }
        .emoji {
            font-size: 36px;
            margin: 20px 0;
        }
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        .loading::after {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #6a399f;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        .logo-image {
            width: 150px;
            height: 150px;
            margin-bottom: 10px;
        }
        .company-name {
            font-size: 28px;
            color: #6a399f;
            font-weight: bold;
        }
        .final-page .logo-image {
            width: 200px;
            height: 200px;
        }
        .final-page .company-name {
            font-size: 32px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="headline">
        <div class="logo-container">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAkFBMVEX///9aLZ9XJ55UI51TIZ1MGptPHZxRH5xNGptLF5r8+/3z8PdIEZlFCpjt6fP5+PvBtNa0pcudhsHMwNzg2erPxN6wn8mmkMXn4u++sNO6rNB9XK5vSKl1Uqx6WK3a0+advdmRd7tsQ6iliMNlOqR4VKyNcriokcWXfr1hNKPUy+LIvNpxS6qEZbLc1efZwWvhAAAR5klEQVR4nO1d6XrqOgwlJiGEQEJYStlboFDa0/d/u5uwBMmOsxLa+d38Oec0XqSJLcuyZTqdv4t5uDjEU6/Tzg/ioO17Kde63E/jnWka38+xH60X2z9Cm83j2fQH0+iZpuOaNvvfd8fz7yxOzpO27/AVWiy3mWf1RhjMdE3T6f6P3/3oZ8loFbV9l4bY7BPTcTQ+j/QlOm56mm+Obd+tDqvdIKs9TWXvzHr1vGY0afuuFVisDMMzXzL/Hw+Rpnm7tu+9CtE5MHrOe/T+wdSMZPgHVifh1JQn1uJ/fG9k9U53Yf8vYB/1S8a9h9OZZmQuf+N2sThHXrlEX5F3D9Mff/GC+NqcnHeGl/i+43zYz+SZ1/L8Hp/jHnsNQH8w99m724c23EMRx4FbZ0m2Zcwpd1z0T40rssVsGlZ/HpMeDwajrD+bjUb97vD2v+5o0PeOs3Ycy230/F1rruJHmn7YnYerBa+ERPFP3bVr1v3oPDlPEF9u5PvuFZuZPk9yF46WPrsMqKrlBUOTU7WCY0vqRXgNfYlkNr8c73iGozDe7NbDzJL0Quu3kH5u7pyKOV74jhBtRp/gO7C3aRhbVoWe6wzXTd/rbs8I9j0v+ekqWYUx1ZqvlIwIoT7cN2nFuA9VTLNQu2NR7vQmcVQKlJB6B/w1Cpm2qRwCxP6Y/m7Dp3aqb8A0qTwfLFE4N4qPmOZiRrmyHRMwanU/9OmuHnZeYnxBLPg+M7yg3/FzYxIe1p3FjOiwD9WznlPm2R0JufPa9cNJ3d7nO69mLkEuBu2h2ngSLZnr2mqnYfxdvJVgcQtvLTDFKzUkrKJx473iJDppmmtHAFb5O4YFCPeLTnv5yfXOMXeOagOSO4NdA85cMNWGxG35l0dPx6Pd0L7Fw7d8uxbCW5qZEw0J0/i1IzQPJTqrjSIIqYrDJtwTJjw9qFbFrWUHZqDmj5+3uo7/yT7mYsL3lT/zTpYWZr5zyY12jj8QmXFQU7O8sQnCM+EjD0TXHoP7MUm1RThCZllCeAjUC9FcZGlxbhERDjvtRNUmhJMqfWnWX0TlRYQ2+dMbyrW4eKBiSO7vWqL/XC7EN/3JeEz1pDpBBE7jeCnXZ+tOmPwhOeWK/C6+Q3Uj/J2o8KbZ6FKRWF6kqHl47dXfBAgpGujfN59/T1k6jnP+4wV1jKC3U2yH2xwj3DgfBQ76Z+6XPUJGc22gDkISuEIaTAvxeRXnRmw8j5CK/6Dp/BVfLghnT1bx1pYVpvbTkyqESKZEn0w/Q3t6vYfOVj/UCJ9aAa+4jynX4TvGD6Kp/3iqSIVwQXRKq6uZD7FSnNXwqxEiJ8OyfmHmKWYb61kAXJKPiBgwITmhbpXP7w2x1fg2j4dMbO7xehkh9ZjMqswF84aYa0TqXjCYDPMsQ4Kd+KpF+CUvRDNLHjlB1w1VWXw+tHdlhCkdC3yEe5IXSPCGJpVXWzRCpHGmNaIw1KPMUoYGCzEuIyREBnRFoxXRJ3vpnVQ0wUkZ4ZpOm8IFNIl34snvVRlhpyShEXK2qOBxH6nxqocG8UzrVCOksrDIHFG1/lS2KSNnqoSwowq6lnN+X8SDxLcgn6kswlPdYSxDRSgsj6L6cI/lS5jlL/9eFSGlgS6Rf5qMWjgpXyvCk+1y4o3MUzj1Vo22uCb/sAEqESLF6OSbRiZY/1Fl7zl9ByHVNwNO+VB5apUBxnSRquwC3LUvhJAmGYt7oXoRGr7KeCVuAm8ECO38T9AyRFvVx8LgCQg1VQBw8C2EmZK08qiD0JEjRIHwk1jdF/3X0vBrhKtGCKny5DLWDYZMvYcQSRm3vCPtI2pJ6m7i1xBqbJk2QEiyL26FVMZSNUJqfylCTUXo1KhUQgTElVtpGw1dDcyVEC7qqvsFwl8i1LQPDJJPhDJVJvvVCKm5z3lVdGFZXxFSlfqrm6VJUcfHlwiRjeLLCJFCUwpTmj3y1fsdQvpD8Vx9hNQVFfYCm5Y11IfcX9HUCEdMVIyQ6qGC1OE5xmXL82u4XaG/P0JE5TrCscq9rYVQlyFUWYfaZikyWOgytN9FiFXqt7DQVLUWflvZK2NtPqC5sqdVIc5wvbswNgqt/5C8Q23HiGrUr9jYxPb3TRVRs6Mh0cK7+jjFzqlq36JecJUjjBRmKTUUhfeYqBDuPm0f7lUeGxWmqlzgTXWWJiDZQhLHSS+VgH4Z4YkgVBikJHTF4A5O6Ak3pA0Q0qBQsG8m5L2KkQ9aN/nZLQhTQltWVQxRKcr9NFQ8/HqEyPtm6b9ANbdCMWNDwV0ECPunDekdskqoyJfoUJQIUXFFQT1CSQZUXIdolkpBU7o7UulSFE+aapKiRb2dKmrHXBlX+2S3MsJE1QarRkjSBb10iVxUWYY026I0G4OKFwKmdBUq07IolFyqShqWH3Ur77tXIqTZtEKGMlQW8hzGfNHKCMPSZNE3BnQrwlCZwOLcaZLYmS9/RZZQmZRoJmBDlThdIpRZe9yXaUEKMyyVd/lNxsxn2yGkFosg/PoUNV8UhFBkDXXGQsZMFcJR6YpJtQj5I/Wl2Js/9nzxPXvhUTVf6s1S4TgA1QGKU7z8Z0vLrUKIUwWlvYbqDtQiZLv+X/wWVhnh/LNfCyFOYZaBvB5KR1fQK0YlhISq+jQdSqLXQ8jVZy9XG5v5fTvT1yMkVt//AMIB/0vlRvpDCJGFz8OjO7fJPQZXQ6iiPGTZMXz+cLwwUzlMPosQKwxeYXTI33X4I4qeqEYeZdmJLw9JdMtGYEm+kR5oAUKUQ+TLG7EIYW6kMZUxnxahDDkzviTKrr88+yLdGv0JhDi5jCv+KvMvF9wZCbPvwIYZaEY/ijAXk1yFBU2xCMcW/hcpw4YZaMGUzVGEL0ZCiM3RMnKbkJcfb13hIjU8FoUg01SrXKnCJvMdGxBGnNf5SiGFyT8mrCR8kZEIoTZDCLcPdg7Zz6LOAhXLJ2YITiTUFDYq0pJPqHZewjifSL6h6sGX7NaXnGOkSQPZ6WmGkFcWs6gQw1w3/vxiZ+Cp32v3TjVlcINVsz+QVSS/GgoRbdnPuH5WUhzSJqOKCEFm8Rt0qJpzpB1r3LcG8BKXGJZYQSMQonCc+NXgGFEvITNRsRF5KIXZG6gVhDTfYWmBEKXBpPtQFXi2pLsbQtiKDFdAn0MHnB9kxmOZSVcYmQWYq+4OoazGQYiJzfXdYqK2uFjxQYr5Xw8hXkzfQwjqxHZcRXPCZ1DlVQiIGiH2cJR2BZFJ3YuPcG4KdnV/9WkVQjxL33fgUQacW7cYORXXpvQ3H0eo3IIX7B26iviLIlwVQG1C/b2XH0CoCnDjjDbfpwE9RpTnZDtCOMoB+mT60/QBCCkvVHe1b7Jd0IMIVXa00F4VgtuC6fDKfnYYoXhYwDdaCPK5+8N9dybfA/l5hDi7WwphFa+EECd2+TgXXBnKdU03IHIvL1T3oZdVTYSqrB0NofFFhL4MMJwC57x+AqFM2VP5h4qgw2vKsj1CeMT396oQpmjvihPXkwXQsJb9KTrUF7CkrSXOGRUMVYnT5wZhJ8FnDGBGaLfr9T5B9FpCQi33+MQnNKYVhKiPgOIrKmr3KxAiVyP+tWiMb99FKDB4cR7/bwjTuyfCXkKoTK5qI7x0BMmPCkLU1U7UJn8YYadnCGQGRqh+h/9FCIlr+XHDtL0iBCq0ElWE67o20pj1/k8ijHDLEowpJ4qxvIBwg8ZoPEdIEWKfG0ZI+wBWEGJdCvtwVoVQg8PN336WVhAqtT1RaG8gpGZ+FaHawY1QL0ZdoMeobYa69FaacABCyWnLZYTALNVqI3hKt0JpYRCEKFfPWcgtvENuOQhnqYQWKsV1/1lYN1+MUOYz/QZCeCSECiGOXMFZ1jdVYUJlhCjiyROUuHIzIbhCTYR4ZfLe/JG6tVfGuJXTUf6b9B0q27tztmEJIXzFaxG+l9OXI1Qfu6ROYHwDIV6G3yjwU9SHnYqWAo72EkI0TAV1LzOL4Bm7Z0UIz+gRuGp0WZl8KKSoijCJSgjRHNUkA9TbMdQ1jKzSeIQw7lLaOQR3/o1LsRtZe8IZ/rz3VEYIIw0SQpgGlRBW/YCwDyg6TEAVnOWCBHJq4z1c5CpV1YQa+y6Xz/sqhOwLJANjuAGbQ4UQmnL8e0TeO5zvHV/E4YPwxBKEsEBCR4gq1KrrPJGEeA+h6s0OsA+FKZDapL0T6MsTbCRDFetfKggpXxg1MUxZVSWbUCE0L/BEgdqOt+Jchn5WxmR5FYQlCwNFE70xLlT26AUy8hPCiAjdD2YHSobOeFVGSOO7PIkVr0Zo0BSSYixc+I5eQFr2wvl9cxMFT/jyxQghwmG5jRgUEEb/b+F4m3JtM94aPIk7dxGqfGP/yZ6pJZCgv2OYqtqb4dA5LiLc1Tzf/e/tA9ELxPcBVXGTEm9P47rndOjJPMvF4X6o0gkBYcVbLCOEK6EeQmUADh4WB1+pxMd66F2L1Qj9SvvRcPrXXsKqDiioYLiPQbkQtcxQm4oqYwiqCMGjbfUQKh1uFE1VHrCFrwcMUIYHqNVDSG0UBUIY0GmAUJFcJc90Fj00Ck77z3/9vFGKKnCCKtmUhyolCwSfQWqIUNEFBrZKoq2F3p2jOJmx5gFcSoQwq1kPIYpIVxHCrTj1ESpPNyV5KXAW/BJKVBgbJWE6RfV28KRNPNEahCi1KiHkD6q8ZXThtN8r+JUDiWEkXUaIJk89hL3qLIWZUFRdUI8wy6odPf/NaT5Vbmcit80RHX5UZd6AiLMiB/ICQrgSW0Ko+GYR8vU8aMUK69ZRLmRRQgiGUZpWOO9ThRA1D1QjhMlyJUL0VnLyApFoV3TwMqH7DXr0Uw8hKsyoQAiNq4YIUXMQUtN6axH6bUF0pxIhfALxdBCsV2og/OBTNRCu3kFIOqd+DiG+6hIlw+GK/ThCcvXipHuYhCFjpMH3Ed7fRhIjVCxEcpA2EOHUIC88L3fV4IUTxCdeoKPzGd88Lx+GS0sxG3x6XQ8R3odGxrGsIc4EZqg4eYEZ3ixlK54JtI9lD8rlyIQ7wBgSHfcyFXxU+BQRzrNlIZG9x5dyRGFCDGcC9AhzL7Kig9l7iqP0Uj5EcfTqtYqCFiMBu7WH+G0e78Mze2+i5+gexu6IqLirOFp9g6+KUbzzdoqC8mGZQfBD1+h8XBcpyvHqH8ZOXopnBcOBjMizbviuxSIrO8b8jRG8ZtqbxpVS9+WmR6Wj3a+B47+BxbxSdVGDdN4MFuMYJkvgF1N1Xo0JQwF/+qDi+WQ0vhE/GnkzpHr5wmbz0K36Dq2KZgzR5Ngw9hrGQy/XM8gQs06D5zq9nPWOOr8/4NyULcE8KZRcemb65wM3XuKXOT3i01Ay9iOmjwL91eLt8QfH7yGOqoVSpmv0P56rIouYnzdD3hIrXlDVNwJDr/E5X/FiRbTQeK/QXF3t/7ygXRfX79CwXCu19QbxrJKRjHexsJo9+uv+Mzis1tXsHcbPNvNE7+a8lzgcDtm/jm4xGY5njbKPcxDv9kc/65/u7vbKwbzbj05m76aRbZ67/PgX6bPYrJO9N9hzWgwZvbt/z2fhnXPGcbS53A91u9rH5/Yg2Rz+o/jBVGnxb5PF5RCsF6tbZTiT4Tt3o9fz/HwwY/+yfwf31zPM0Y3j1bwF1dn22/jBRPpbDiZCv4b5Ik7aH8Q/i8vfx1e+zFYQJqO/KDg+ielxZ9ypPbL6V/z5Z+Yn/heNzP8DBND9s6VV4msAAAAASUVORK5CYII=" alt="Octo Auto Logo" class="logo-image">
            <span class="company-name">Octo Auto</span>
        </div>
        מלא את הטופס וחסוך לעצמך שעות של זמן מבוזבז בעזרתנו!
    </div>
    
    <div class="progress-indicator">
        <div class="steps">
            <div id="step1" class="step active">1</div>
            <div class="step-connector"></div>
            <div id="step2" class="step inactive">2</div>
            <div class="step-connector"></div>
            <div id="step3" class="step inactive">3</div>
        </div>
    </div>
    
    <!-- MAIN FORM -->
    <form id="mainForm">
        <!-- Page 1: Phone and Name for WhatsApp Video -->
        <div id="page1" class="page active form-container">
            <h1>קבל אוטומציה חינם לעסק לווצאפ</h1>
            <div id="whatsappForm">
                <div class="form-group">
                    <label for="whatsappName">שם <span class="required">*</span></label>
                    <input type="text" id="whatsappName" required>
                </div>
                
                <div class="form-group">
                    <label for="whatsappPhone">מספר פלאפון <span class="required">*</span></label>
                    <input type="tel" id="whatsappPhone" pattern="[0-9]{10}" maxlength="10" required>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="whatsappConsent" value="כן" required>
                    <label for="whatsappConsent" class="checkbox-label" style="font-size: 12px; white-space: normal; line-height: 1.4;">
                        אני מאשר/ת קבלת ההדרכה החינמית או כל תוכן אחר במדיה 
                        הדיגיטלית בדרך כזו או אחרת.
                    </label>
                </div>
                
                <div id="loading1" class="loading">שולח...</div>
                
                <!-- Button to go to next page -->
                <button type="button" id="page1Button" onclick="goToSecondPage()">שלח לי סרטון אוטומציה חינם לווצאפ</button>
            </div>
        </div>
        
        <!-- Page 2: Simplified Registration Form -->
        <div id="page2" class="page form-container">
            <button type="button" class="back-button" onclick="goToFirstPage()">
                &larr; חזרה לשלב הקודם
            </button>
            
            <h1>טופס רישום לשיחת התאמה להטמעה של אוטומציות AI לעסק שלך</h1>
            <div id="applicationForm">
                <div class="form-group">
                    <label for="email">כתובת אימייל <span class="required">*</span></label>
                    <input type="email" id="email" required>
                </div>
                
                <div class="form-group">
                    <label for="callTime">מהו הזמן המועדף לשיחה? <span class="required">*</span></label>
                    <select id="callTime" required>
                        <option value="" disabled selected>בחר את הזמן המועדף</option>
                        <option value="בוקר">בוקר (9:00-13:00)</option>
                        <option value="אחר הצהריים">אחר הצהריים (13:00-17:00)</option>
                        <option value="ערב">ערב (17:00-19:00)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="businessType">איזה סוג עסק יש לך? <span class="required">*</span></label>
                    <select id="businessType" required>
                        <option value="" disabled selected>בחר את סוג העסק שלך</option>
                        <option value="קמעונאות">קמעונאות</option>
                        <option value="מבוסס שירות">מבוסס שירות</option>
                        <option value="ייצור">ייצור</option>
                        <option value="טכנולוגיה/תוכנה">טכנולוגיה/תוכנה</option>
                        <option value="מזון ומשקאות">מזון ומשקאות</option>
                        <option value="בריאות ורווחה">בריאות ורווחה</option>
                        <option value="יצירתיות ועיצוב">יצירתיות ועיצוב</option>
                        <option value="מסחר אלקטרוני">מסחר אלקטרוני</option>
                        <option value="עסק מקוון">עסק מקוון</option>
                        <option value="אחר">אחר</option>
                    </select>
                </div>
                
                <div class="form-group" id="otherBusinessContainer" style="display: none;">
                    <label for="otherBusiness">נא לפרט את סוג העסק שלך <span class="required">*</span></label>
                    <input type="text" id="otherBusiness">
                </div>
                
                <div id="loading2" class="loading">שולח...</div>
                
                <!-- Submit button for page 2 form -->
                <button type="button" id="page2Button" onclick="submitForm()">שלח</button>
            </div>
        </div>
    </form>
    
    <!-- Page 3: Final confirmation -->
    <div id="page3" class="page form-container final-page">
        <div class="emoji">✨</div>
        <h2>מעולה!</h2>
        <p>ההדרכה נשלחה אליך ובקרוב נעלה לשיחה, מתרגשים :)</p>
        <div class="emoji">🎉</div>
    </div>
    
    <script>
        // Your Webhook URL
        const API_URL = "https://peleg123.app.n8n.cloud/webhook-test/32f7c6ab-8e9e-4743-b0e7-388e9c711cea";
        
        // Generate strong cryptographic CSRF token
        function generateCSRFToken() {
            const buffer = new Uint8Array(32);
            window.crypto.getRandomValues(buffer);
            return Array.from(buffer)
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }
        
        // Generate a cryptographic nonce for request validation
        function generateNonce() {
            const buffer = new Uint8Array(16);
            window.crypto.getRandomValues(buffer);
            return Array.from(buffer)
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }
        
        // Generate a hash for data verification
        function generateHash(data) {
            // Simple hash function for client-side use
            return Array.from(data)
                .reduce((hash, char) => {
                    return ((hash << 5) - hash) + char.charCodeAt(0);
                }, 0)
                .toString(36);
        }
        
        // Clear sensitive data from memory with secure overwrite
        function clearFormData() {
            // Overwrite form data object with random data before clearing
            // This helps prevent memory disclosure attacks
            for (let key in formData) {
                if (typeof formData[key] === 'string') {
                    // Overwrite strings with random data
                    const randomLength = formData[key].length;
                    formData[key] = Array(randomLength)
                        .fill(0)
                        .map(() => String.fromCharCode(Math.floor(Math.random() * 26) + 97))
                        .join('');
                } else if (typeof formData[key] === 'object' && formData[key] !== null) {
                    // Recursively overwrite objects
                    for (let subKey in formData[key]) {
                        if (typeof formData[key][subKey] === 'string') {
                            const randomLength = formData[key][subKey].length;
                            formData[key][subKey] = Array(randomLength)
                                .fill(0)
                                .map(() => String.fromCharCode(Math.floor(Math.random() * 26) + 97))
                                .join('');
                        }
                    }
                }
            }
            
            // Reset form data to initial state
            formData = {
                name: "",
                phone: "",
                email: "",
                callTime: "",
                businessType: "",
                otherBusinessDetails: "",
                formType: "טופס הרשמה מלא",
                consent: false,
                csrfToken: ""
            };
            
            // Clear form fields
            document.getElementById('whatsappName').value = '';
            document.getElementById('whatsappPhone').value = '';
            document.getElementById('whatsappConsent').checked = false;
            document.getElementById('email').value = '';
            document.getElementById('callTime').selectedIndex = 0;
            document.getElementById('businessType').selectedIndex = 0;
            document.getElementById('otherBusiness').value = '';
            document.getElementById('csrfToken').value = '';
            
            // Clear any honeypot fields
            if (document.getElementById('website')) {
                document.getElementById('website').value = '';
            }
            
            // Force garbage collection if possible (not directly controllable)
            setTimeout(() => {
                try {
                    window.gc(); // Only works in some debug environments
                } catch (e) {
                    // Not supported, ignore
                }
            }, 100);
        }
        
        // Store form data
        let formData = {
            name: "",
            phone: "",
            email: "",
            callTime: "",
            businessType: "",
            otherBusinessDetails: "",
            formType: "טופס הרשמה מלא",
            consent: false,
            csrfToken: ""
        };
        
        // Simplified navigation functions
        function goToFirstPage() {
            hideAllPages();
            document.getElementById('page1').classList.add('active');
            updateProgressIndicator(1);
        }
        
        // Advanced input validation with regex patterns
        function validateInput(input, type) {
            if (typeof input !== 'string') {
                return '';
            }
            
            input = input.trim();
            
            // Apply specific validation rules based on input type
            switch(type) {
                case 'name':
                    // Allow letters, spaces, and common punctuation for names
                    input = input.replace(/[^\p{L}\p{M}\s\.\-\']/gu, '');
                    // Limit length for name
                    return escapeHtml(input.substring(0, 50));
                    
                case 'phone':
                    // Digits only for phone numbers
                    input = input.replace(/[^\d]/g, '');
                    return input.substring(0, 15);
                    
                case 'email':
                    // Basic email validation
                    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                    if (!emailPattern.test(input)) {
                        return '';
                    }
                    return escapeHtml(input.substring(0, 100));
                    
                case 'text':
                    // Remove potentially harmful characters
                    input = input.replace(/[<>]/g, '');
                    return escapeHtml(input.substring(0, 200));
                
                default:
                    // Default - basic escaping and length limiting
                    return escapeHtml(input.substring(0, 100));
            }
        }
        
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        function goToSecondPage() {
            // Validate first page
            const name = document.getElementById('whatsappName').value;
            const phone = document.getElementById('whatsappPhone').value;
            const consent = document.getElementById('whatsappConsent').checked;
            
            if (!name || !phone || !consent) {
                alert('נא למלא את כל השדות המסומנים ב-* ולאשר את תנאי השימוש');
                return;
            }
            
            // Validate phone number has exactly 10 digits
            if (!/^\d{10}$/.test(phone)) {
                alert('מספר הטלפון חייב להכיל בדיוק 10 ספרות');
                return;
            }
            
            // Advanced validation for name (prevent injection)
            const sanitizedName = validateInput(name, 'name');
            if (sanitizedName.length < 2) {
                alert('שם חייב להכיל לפחות 2 תווים');
                return;
            }
            
            // Advanced validation for phone
            const sanitizedPhone = validateInput(phone, 'phone');
            if (sanitizedPhone.length < 10) {
                alert('מספר טלפון לא תקין');
                return;
            }
            
            // Store data with additional security measures
            formData.name = sanitizedName;
            formData.phone = sanitizedPhone;
            formData.consent = consent ? "כן" : "לא";
            formData.submissionStartTime = new Date().getTime();
            
            // Device fingerprinting for security
            formData.deviceInfo = {
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                userAgent: navigator.userAgent,
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                timestamp: new Date().toISOString()
            };
            
            // Generate CSRF token for second page
            formData.csrfToken = generateCSRFToken();
            
            // Additional hash for verification
            formData.verificationHash = generateHash(sanitizedName + sanitizedPhone);
            
            // Check for bot-like behavior (form filled too quickly)
            const now = new Date().getTime();
            const pageLoadTime = window._pageLoadTime || (now - 10000);
            if (now - pageLoadTime < 1500) {
                // Suspicious: form filled too quickly
                console.log('Bot detection: form filled too quickly');
                // Add slight delay to discourage bots
                setTimeout(() => {
                    processFirstPage();
                }, 2000);
            } else {
                processFirstPage();
            }
        }
        
        function processFirstPage() {
            // Show loading indicator
            document.getElementById('loading1').style.display = 'block';
            document.getElementById('page1Button').disabled = true;
            
            // Add CSRF token to hidden field
            document.getElementById('csrfToken').value = formData.csrfToken;
            
            // Move to page 2 after a short delay
            setTimeout(() => {
                document.getElementById('loading1').style.display = 'none';
                document.getElementById('page1Button').disabled = false;
                
                hideAllPages();
                document.getElementById('page2').classList.add('active');
                updateProgressIndicator(2);
            }, 1000);
        }
        
        function submitForm() {
            // Advanced security: Check for suspicious behaviors
            if (detectSuspiciousBehavior()) {
                console.warn('Suspicious behavior detected');
                // Add honeypot delay but still process the form
                // This slows down potential attackers without affecting legitimate users
                setTimeout(() => {
                    processSubmission();
                }, 3000);
                return;
            }
            
            processSubmission();
        }
        
        function detectSuspiciousBehavior() {
            // Check if form is being submitted by a bot
            
            // 1. Check for lack of mouse movement
            if (!window._mouseMovementDetected) {
                return true;
            }
            
            // 2. Check for extremely fast form completion
            if (formData.submissionStartTime) {
                const elapsed = new Date().getTime() - formData.submissionStartTime;
                if (elapsed < 3000) { // Less than 3 seconds to fill the form
                    return true;
                }
            }
            
            // 3. Check for hidden field tampering
            if (document.getElementById('csrfToken').value !== formData.csrfToken) {
                return true;
            }
            
            return false;
        }
        
        function processSubmission() {
            // Validate CSRF token
            const submittedToken = document.getElementById('csrfToken').value;
            if (submittedToken !== formData.csrfToken) {
                console.error('CSRF token mismatch. Potential CSRF attack.');
                alert('שגיאת אבטחה. אנא רענן את הדף ונסה שנית.');
                return;
            }
            
            // Validate second page
            const email = document.getElementById('email').value;
            const callTime = document.getElementById('callTime').value;
            const businessType = document.getElementById('businessType').value;
            const otherBusiness = document.getElementById('otherBusiness').value;
            
            if (!email || !callTime || !businessType) {
                alert('נא למלא את כל השדות המסומנים ב-*');
                return;
            }
            
            // Validate email format with more strict validation
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(email)) {
                alert('נא להזין כתובת אימייל תקינה');
                return;
            }
            
            if (businessType === 'אחר' && !otherBusiness) {
                alert('נא לפרט את סוג העסק שלך');
                return;
            }
            
            // Enhanced input validation with specific validation types
            const sanitizedEmail = validateInput(email, 'email');
            if (!sanitizedEmail) {
                alert('כתובת אימייל לא תקינה');
                return;
            }
            
            const sanitizedBusinessType = validateInput(businessType, 'text');
            let sanitizedOtherBusiness = '';
            if (businessType === 'אחר') {
                sanitizedOtherBusiness = validateInput(otherBusiness, 'text');
                if (!sanitizedOtherBusiness && otherBusiness) {
                    alert('פירוט עסק מכיל תווים לא תקינים');
                    return;
                }
            }
            
            // Rate limiting with more sophisticated controls
            const lastSubmissionTime = sessionStorage.getItem('lastSubmissionTime');
            const currentTime = new Date().getTime();
            
            if (lastSubmissionTime) {
                const timeSinceLastSubmission = currentTime - parseInt(lastSubmissionTime);
                const minSubmissionInterval = 15000; // 15 seconds
                
                if (timeSinceLastSubmission < minSubmissionInterval) {
                    const waitTime = Math.ceil((minSubmissionInterval - timeSinceLastSubmission) / 1000);
                    alert(`נא להמתין ${waitTime} שניות לפני שליחה חוזרת.`);
                    return;
                }
            }
            
            // Update form data with sanitized values
            formData.email = sanitizedEmail;
            formData.callTime = callTime;
            formData.businessType = sanitizedBusinessType;
            if (businessType === 'אחר') {
                formData.otherBusinessDetails = sanitizedOtherBusiness;
            }
            
            // Remove leading zero from phone number
            if (formData.phone.startsWith('0')) {
                formData.phone = formData.phone.substring(1);
            }
            
            // Record submission time for rate limiting
            sessionStorage.setItem('lastSubmissionTime', currentTime.toString());
            
            // Show loading indicator
            document.getElementById('loading2').style.display = 'block';
            document.getElementById('page2Button').disabled = true;
            
            // Encrypt personal data before sending
            const encryptData = (data) => {
                // Simple XOR encryption with a key derived from the CSRF token
                // This is not true encryption but adds a layer of obfuscation
                const key = formData.csrfToken.split('').map(c => c.charCodeAt(0));
                return Array.from(data).map((char, i) => {
                    return String.fromCharCode(char.charCodeAt(0) ^ key[i % key.length]);
                }).join('');
            };
            
            // Enhance formData with encrypted fields
            formData.secureFields = {
                encEmail: encryptData(sanitizedEmail),
                encPhone: encryptData(formData.phone),
                checksum: generateHash(sanitizedEmail + formData.phone + currentTime)
            };
            
            // Send data to server
            sendFormData();
        }
        
        function sendFormData() {
            // Format data for Google Apps Script
            const formattedData = {
                שם: formData.name,
                "מספר פלאפון": formData.phone,
                אימייל: formData.email,
                "זמן שיחה מועדף": formData.callTime,
                "סוג עסק": formData.businessType === 'אחר' ? 
                    formData.businessType + ': ' + formData.otherBusinessDetails : 
                    formData.businessType,
                "סוג טופס": formData.formType,
                הסכמה: formData.consent,
                "תאריך הגשה": new Date().toLocaleString('he-IL', {
                    timeZone: 'Asia/Jerusalem'
                })
            };
            
            // Send to Google Apps Script
            fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formattedData),
                redirect: 'follow',
                mode: 'no-cors' // Important for cross-origin requests to Google Apps Script
            })
            .then(response => {
                console.log('Form submitted successfully');
                
                // Show the thank you page after submission
                hideAllPages();
                document.getElementById('page3').classList.add('active');
                updateProgressIndicator(3);
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                alert('אירעה שגיאה בשליחת הטופס. נסה שנית מאוחר יותר.');
                document.getElementById('loading2').style.display = 'none';
                document.getElementById('page2Button').disabled = false;
            });
        }
        
        function hideAllPages() {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
        }
        
        function updateProgressIndicator(step) {
            document.querySelectorAll('.step').forEach((stepElement, index) => {
                if (index + 1 === step) {
                    stepElement.className = 'step active';
                } else {
                    stepElement.className = 'step inactive';
                }
            });
        }
        
        // Show "Other" field if "Other" is selected
        document.getElementById('businessType').addEventListener('change', function() {
            const otherContainer = document.getElementById('otherBusinessContainer');
            const otherBusinessInput = document.getElementById('otherBusiness');
            
            if (this.value === 'אחר') {
                otherContainer.style.display = 'block';
                otherBusinessInput.setAttribute('required', '');
            } else {
                otherContainer.style.display = 'none';
                otherBusinessInput.removeAttribute('required');
            }
        });
        // Implement subresource integrity checking
        function checkScriptIntegrity() {
            // Create a SHA-256 hash of our critical functions
            const criticalCode = goToSecondPage.toString() + 
                                 submitForm.toString() + 
                                 sendFormData.toString();
            
            try {
                // Create a hash of the code for integrity verification
                // This is a simplified version as we can't use crypto API directly for this
                let hash = 0;
                for (let i = 0; i < criticalCode.length; i++) {
                    const char = criticalCode.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                
                // Store the hash for future verification
                window._codeIntegrityHash = hash;
                
                // Periodically check if the code has been modified
                setInterval(function() {
                    const currentCriticalCode = goToSecondPage.toString() + 
                                              submitForm.toString() + 
                                              sendFormData.toString();
                    
                    let currentHash = 0;
                    for (let i = 0; i < currentCriticalCode.length; i++) {
                        const char = currentCriticalCode.charCodeAt(i);
                        currentHash = ((currentHash << 5) - currentHash) + char;
                        currentHash = currentHash & currentHash;
                    }
                    
                    if (currentHash !== window._codeIntegrityHash) {
                        console.error('Code integrity violation detected - possible attack');
                        alert('זוהתה בעיית אבטחה. אנא רענן את הדף.');
                    }
                }, 5000);
                
            } catch (e) {
                console.error('Integrity check error:', e);
            }
        }
        
        // Call integrity check on load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkScriptIntegrity, 1000);
        });
    </script>
</body>
</html>
